---
description: 빌드 전 품질 관리 및 검증 프로세스 (Quality Control & Validation)
---

# 품질 관리 및 검증 프로세스 (QC & Validation Workflow)

이 문서는 프로덕션 빌드 및 배포 전에 반드시 수행해야 하는 품질 검증 절차를 정의합니다.

## 1. 선행 조건 (Pre-requisites)
- 모든 기능 구현 및 버그 수정이 완료되어야 합니다.
- `src/types.ts` 등 핵심 타입 정의가 최신 상태여야 합니다.

## 2. 자동화 검증 수행
`npm run qc` 명령어를 통해 다음 항목들을 자동으로 전수 검사합니다.

1. **Linting (정적 분석)**:
   - 명령어: `npm run lint` (`eslint .`)
   - 목적: 문법 오류, 잠재적 버그, 불필요한 import, 스타일 가이드 준수 여부 확인.
   
2. **Logic & Integration Test (기능 테스트)**:
   - 명령어: `npm run test` (`vitest run`)
   - 수행 파일: `qc.test.ts`
   - 목적:
     - 핵심 로직(운세 계산 등)이 정상 값을 반환하는지 검증.
     - 필수 환경 변수(API URL 등) 및 설정 파일 존재 여부 확인.

## 3. 수동 타입 검사 (Type Check)
빌드 도구(Vite)는 타입 에러를 일부 무시할 수 있으므로, 엄격한 검사를 별도 수행합니다.
- 명령어: `npx tsc --noEmit`
- 기준: "No problems found" 메시지가 출력되거나(오류 없음), 아무런 출력이 없어야 통과.

## 4. 빌드 검증 (Build Verification)
모든 테스트 통과 후 최종 빌드를 수행하여 아티팩트 생성을 확인합니다.
- 명령어: `npm run build`
- 확인 사항: `todays-match.ait` 파일이 정상적으로 생성되었는지 확인.

## 5. 웹 브라우저 시각 검증 (Visual Verification)
웹 브라우저에서 모든 화면이 정상 렌더링되는지 육안 확인합니다.

### 5-1. 광고 기능 임시 비활성화 (Ad Bypass)
`@apps-in-toss/web-bridge`의 광고 SDK는 토스 앱 환경에서만 동작합니다.
일반 웹 브라우저에서 Premium Report 페이지가 빈 화면으로 나오는 것은 **정상**이며, 검증을 위해 임시로 광고 기능을 비활성화합니다.

**절차:**
1. `src/pages/PremiumReport.tsx` 파일에서 `useRewardedAd` 훅 import를 주석 처리합니다.
2. `isAdLoading = false`와 Mock `showRewardAd` 함수를 임시 삽입합니다.
3. 웹 검증 완료 후 **반드시 원래 코드로 복원**합니다.

### 5-2. 화면별 검증 체크리스트
| 페이지 | URL | 확인 항목 |
| :--- | :--- | :--- |
| 홈 | `/` | 캐릭터 아바타, 운세 보기 버튼 |
| 프로필 수정 | `/profile` | 입력 필드(닉네임, 생년월일 등) |
| 오늘의 운세 | `/today-fortune` | 점수, 키워드, 메시지, **데이터 동기화** |
| 프리미엄 보고서 | `/premium-report` | 💎 아이콘, 광고 버튼, **중복 헤더(화살표) 제거 여부** |
| 개인정보 처리방침 | `/privacy` | 정책 내용 표시 |

### 5-3. 검증 아티팩트 보관
검증 완료 후 스크린샷은 버전별 폴더(`docs/verification/vX.Y.Z/`)에 저장하여 증거로 보관합니다.

## 6. 토스 규정 준수 체크리스트 (Toss Regulation)
빌드 전 다음 항목들이 규정에 위배되지 않는지 최종 확인합니다.
- [ ] **중복 내비게이션 바**: 페이지 내부에 뒤로가기 화살표(`←`)나 별도의 타이틀 헤더가 없는가? (토스 시스템 바 사용 필수)
- [ ] **다크 모드**: 라이트 모드 전용으로 구현되었는가?
- [ ] **자사 앱/웹 유도**: 외부 링크나 앱 설치 유도 로직이 없는가?
- [ ] **토스 페이/결제**: 유료 기능은 토스 규정을 따르는가?

## 7. 실행 규칙 (Rules)
- **모든 배포(Deploy) 전에는 반드시 위 2, 3, 4, 5, 6번 과정을 통과해야 합니다.**
- `qc` 단계에서 실패할 경우 절대 빌드/배포를 진행하지 않습니다.
- 웹 시각 검증 시 광고 기능을 비활성화했다면 **빌드 전 반드시 복원**해야 합니다.
- **검증 폴더에 스크린샷과 함께 README.md를 작성하여 보고해야 합니다.**
