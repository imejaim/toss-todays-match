# 📋 릴리스 히스토리 (Release History)

> **⚠️ 중요**: 이 문서는 모든 출시 버전의 기능 목록과 스크린샷을 기록합니다.  
> **출시 전 반드시** 이전 버전과 비교하여 의도치 않은 기능 누락이 없는지 확인하세요.

**최종 업데이트**: 2026-01-19  
**문서 작성자**: Antigravity AI Assistant

---

## 📌 릴리스 개요

| 버전 | 출시일 | Git 커밋 | 주요 변경 | 상태 |
|------|--------|----------|----------|------|
| v1.0.0 | 2026-01-06 | `bf190e0` | 최초 출시 (MVP) | ✅ 출시 완료 |
| v1.0.1 | 2026-01-11 | `0609c5b` | 광고 안정화, UI 개선 | ✅ 출시 완료 |
| v1.0.2 | 2026-01-21 | - | 프로필 UX 개선, GitHub 이미지 | ✅ 검증 완료 |
| v1.0.3 | 2026-01-23 | (Skipped) | 심사 반려 대응(UI/UX), 운명 이미지 생성 | 🚫 배포 취소 (버그) |
| v1.0.4 | 2026-01-23 | `6d0a19f` | 프로필 아이콘/공유 링크 긴급 수정 | 🚀 심사 요청 중 |
| v1.0.5 | 2026-01-24 | `(TBD)` | 토스 공식 공유 API 적용 | 🚀 심사 준비 |

---

## 🏷️ v1.0.5 - 토스 공식 공유 API 적용 (2026-01-24)

### Git 정보
- **주요 변경**: `getTossShareLink` 적용으로 딥링크 강화

### 🛠️ 개선 사항 (Improvements)
| 이슈 | 설명 | 해결 |
|------|------|------|
| **공유 링크 개선** | 기존 Web Share API 사용 | **`getTossShareLink`** 도입으로 딥링크(`intoss://`) 생성 |
| **코드 리팩토링** | 파편화된 공유 로직 | `share.ts`로 통합 및 `TodayFortune`/`PremiumReport` 간소화 |
| **타입 안정성** | `share.ts` 리턴 타입 명확화 | Lint 에러 해결 및 타입 정의 보강 |

---

## 🏷️ v1.0.4 - 심사 반려 대응 및 긴급 수정 (2026-01-23)

### Git 정보
- **커밋**: (TBD)
- **주요 변경**: 프로필 이미지 기능 + 공유 기능 안정화 + UI 검증 강화

### 🛠️ 심사 반려 대응 및 긴급 수정 (Fixes)
| 이슈 | 원인 | 해결 |
|------|------|------|
| 시스템 알럿 사용 | 브라우저 `alert()` 사용 | TDS 스타일 **Toast 컴포넌트**로 전면 교체 |
| 안드로이드 터치 박스 | 탭 시 파란색 하이라이트 발생 | CSS `WebkitTapHighlightColor: transparent` 적용 |
| **광고 미작동 (Profile)** | `showRewardAd`를 `await`로 호출 | **콜백 방식**(`onRewarded`)으로 호출 로직 수정 |
| **공유 링크 404** | 존재하지 않는 URL, Private 도메인 | `window.location.href` 사용 및 `private-apps` 필터링 |
| **프로필 아이콘 미반영** | 홈 화면 로직 누락 | `Home.tsx`에도 `avatarUrl` 표시 로직 추가 |

### ✨ 신규 기능 (New Features)
| 기능 | 설명 |
|------|------|
| **나의 운명 이미지** | 프로필에서 광고 시청 후 사주 기반 아바타 이미지 생성 |
| **꿍친 운명 이미지** | 꿍친 프로필에서도 동일하게 이미지 생성 및 저장 가능 |
| **안전한 UI 검증** | `qc.test.ts`에 alert 사용 금지 및 필수 CSS 검증 규칙 추가 |

### 📸 스크린샷
- `profile_destiny_section.png`: 프로필 내 운명 이미지 생성 섹션

---

## 🏷️ v1.0.2 - 프로필 UX 개선 및 기능 확장 (2026-01-21)

### Git 정보
- **커밋**: `bf190e0`
- **커밋 메시지**: `v1.0.1: TDS 제거 및 글로벌 디자인 적용, 검증 절차 확립`

### 📱 구현된 화면 및 기능

#### 1. 홈 화면 (Home)
| 기능 | 설명 | 상태 |
|------|------|:----:|
| 내 연애 프로필 카드 | 닉네임, 띠 아이콘, 오행 배지 표시 | ✅ |
| 운세 보기 버튼 | 오늘의 운세 화면으로 이동 | ✅ |
| 프로필 수정 버튼 | 프로필 편집 화면으로 이동 | ✅ |
| 꿍친 리스트 | 등록된 친구 목록 표시 | ✅ |
| 친구 추가/수정/삭제 | 꿍친 관리 기능 | ✅ |

#### 2. 프로필 입력 화면 (Profile)
| 기능 | 설명 | 상태 |
|------|------|:----:|
| 닉네임 입력 | 텍스트 입력 | ✅ |
| 생년월일 입력 | 브라우저 기본 date picker | ✅ |
| 태어난 시간 입력 | 브라우저 기본 time picker + 모름 체크박스 | ✅ |
| 성별 선택 | 남성/여성 버튼 | ✅ |
| 연애 상태 선택 | 솔로/연애중/기혼/복잡함 | ✅ |
| 저장하기 버튼 | 하단 고정 CTA | ✅ |

#### 3. 오늘의 운세 화면 (TodayFortune)
| 기능 | 설명 | 상태 |
|------|------|:----:|
| 캐릭터 아바타 | 띠 이모지 + 오행 색상 | ✅ |
| 연애 점수 | 0~100점 표시 | ✅ |
| 키워드 태그 | 오늘의 운세 키워드 | ✅ |
| 운세 메시지 | LLM 생성 메시지 | ✅ |
| 프리미엄 보고서 버튼 | 광고 시청 후 상세 리포트 | ✅ |

#### 4. 프리미엄 보고서 화면 (PremiumReport)
| 기능 | 설명 | 상태 |
|------|------|:----:|
| 광고 시청 버튼 | 토스 리워드 광고 연동 | ✅ |
| AI 심층 분석 | LLM 분석 결과 | ✅ |
| 운명의 짝꿍 카드 | 이상형 이미지 + 설명 | ✅ |

### 📸 스크린샷 저장 위치
```
docs/assets/v1.0.0/
├── home.png
├── profile.png
├── today_fortune.png
└── premium_report.png
```

---

## 🏷️ v1.0.1 - 광고 안정화 (2026-01-11)

### Git 정보
- **커밋**: `0609c5b`
- **커밋 메시지**: `v1.0.1: 광고 및 UI 안정화 - 출시 요청 완료`

### 🐛 버그 수정
| 이슈 | 원인 | 해결 |
|------|------|------|
| React Error #130 | 토스 브릿지 웹 로딩 실패 | 조건부 사용 |
| 광고 작동 안 함 | 브릿지 임포트 누락 | 임포트 복원 |
| 원숭이 아이콘 고정 | 에니어그램 우선 로직 | 년주 띠 우선 |
| 마크다운 노출 | LLM 응답 그대로 표시 | HTML 변환 |

### ✨ 개선 사항
| 항목 | 내용 |
|------|------|
| 홈 화면 문구 | 오타 수정, 앱 홍보 문구 추가 |
| 짝꿍 카드 설명 | 오행 특성 반영 동적 생성 |
| QC 테스트 | 12개 → 광고 검증 추가 |

### 📱 화면 변경 사항
> ⚠️ v1.0.0 대비 화면 레이아웃 변경 없음 (버그 수정만)

### 📸 스크린샷 저장 위치
```
docs/assets/v1.0.1/
├── home.png
├── profile.png
├── today_fortune.png
└── premium_report.png
```

### 검증 보고서
- `docs/verification/v1.0.1/README.md`

---

## 🏷️ v1.0.2 - 프로필 UX 개선 및 기능 확장 (2026-01-21)

### Git 정보
- **커밋**: (Pending Release)
- **주요 변경**: 프로필/꿍친 UX 개선, 에너지 분석 확장, 공유 기능 추가

### 🎯 구현된 기능

#### 1. 프로필 및 꿍친 UX 개선
| 기능 | 상태 | 설명 |
|------|:----:|------|
| 생년월일 개별 입력 | ✅ | 년/월/일 3개 드롭다운으로 변경 및 스타일 개선 |
| "꿍친 에너지 확인하기" | ✅ | 꿍친 프로필 수정 시 버튼 문구 및 기능 동작 수정 (본인/친구 구분) |
| 날짜 수정 즉시 반영 | ✅ | 프로필 수정 후 홈 화면 데이터 즉시 동기화 (Saju/HD 재계산) |

#### 2. 홈 화면 에너지 분석 확장
| 기능 | 상태 | 설명 |
|------|:----:|------|
| 내 프로필 상세 보기 | ✅ | 카드 클릭 시 사주/HD/키워드 분석 상세 내용 확장/접기 |
| 꿍친 프로필 상세 보기 | ✅ | 친구 카드 클릭 시 각각의 에너지 분석 정보 확장/접기 |

#### 3. 프리미엄 리포트 및 공유 (New)
| 기능 | 상태 | 설명 |
|------|:----:|------|
| GitHub 이미지 로드 | ✅ | 외부 URL 사용으로 앱 용량 최적화 및 이미지 다양화 |
| 공유 기능 개선 | ✅ | 토스 앱 내: OG 이미지 + 딥링크 공유, 웹: 클립보드 복사 |
| 꿍친 추가 기능 | ✅ | 운명의 짝꿍을 내 친구 목록에 바로 저장하는 기능 추가 |
| 리워드 광고 최적화 | ✅ | 로컬 개발 환경 크래시 방지 및 토스 앱 광고 정상 연동 (Dynamic Import) |

### 📸 스크린샷 저장 완료
```
docs/assets/v1.0.2/
├── home.png             # 홈 화면 (에너지 확장 가능)
├── profile.png          # 프로필 입력 및 수정 화면
├── today_fortune.png    # 오늘의 운세 화면
└── premium_report.png   # 프리미엄 보고서 (공유 버튼 포함)
```

---

## 🚨 사고 보고서: v1.0.2 개발 중 기능 손실 (2026-01-18)

### 📅 발생 일시
2026-01-18 (토)

### 🔍 원인 분석
1. 빌드 오류 발생으로 인해 `git stash` 실행
2. 이전 안정 버전(`0609c5b`)으로 체크아웃하여 빌드 테스트
3. 빌드 성공 후 이미지 관련 변경만 추가
4. **stash된 변경사항(프로필 개선)을 복구하지 않고 커밋/푸시**
5. 결과: 프로필 UX 개선 기능들이 누락된 상태로 배포

### 📋 손실된 기능 목록
1. 생년월일 개별 입력 (년/월/일 드롭다운)
2. "나의 에너지 확인하기" 버튼
3. 저장 전 에너지 설명 미리보기 카드

### ✅ 재발 방지 대책
1. **출시 전 기능 체크리스트 필수 확인** (아래 섹션 참조)
2. **git stash 사용 시 주의사항 명시**
3. **버전별 스크린샷 의무 저장**
4. **출시 승인 결재 프로세스 도입**

---

## 🚨 사고 보고서: v1.0.2 광고 미작동 (2026-01-21)

### 📅 발생 일시
2026-01-21 (화)

### 🔍 문제 현상
- 토스 앱에서 "광고 보고 무료로 확인" 버튼 클릭 시 광고 없이 바로 프리미엄 리포트가 열림
- 광고 수익 손실 발생

### 📋 원인 분석
1. `useRewardedAd.ts`에서 `import { GoogleAdMob } from '@apps-in-toss/web-bridge'`가 **삭제됨**
2. 대신 `declare const GoogleAdMob: any;`로 **타입 선언만** 존재
3. 토스 앱에서 `GoogleAdMob`이 `undefined`가 되어 `isTossApp = false`로 평가
4. 결과: 토스 앱에서도 개발 모드처럼 광고 스킵

### 🔧 발생 경위
1. 로컬 개발 환경에서 `@apps-in-toss/web-bridge` import 시 에러 발생
2. 에러를 회피하기 위해 import를 `declare const`로 변경
3. **QC 테스트(`qc.test.ts`)를 수정하여 `declare`도 허용하도록 변경** ← 핵심 실수
4. 테스트가 통과하여 문제를 인지하지 못함
5. 배포 후 실제 앱에서 광고 미작동 확인

### ❌ 검증 실패 원인
| 검증 단계 | 결과 | 문제점 |
|:---:|:---:|:---|
| QC 테스트 | ✅ 통과 | 테스트 자체를 수정하여 우회 |
| 브라우저 테스트 | ✅ 통과 | 로컬에서는 광고가 원래 작동 안 함 |
| 샌드박스 테스트 | ⚠️ 미확인 | 광고 로딩을 직접 확인하지 않음 |

### ✅ 수정 사항 (v1.0.3)
1. `useRewardedAd.ts`: 실제 import 복원
2. `qc.test.ts`: `declare` 허용 제거, 실제 import 필수 검증으로 원복
3. `03_RULEBOOK.md`: QC 테스트 수정 금지 규칙 및 광고 코드 보호 규칙 추가

### ✅ 재발 방지 대책
1. **QC 테스트 코드 수정 금지** (RULEBOOK 9.1)
2. **광고 SDK import 필수** (RULEBOOK 10.1)
3. **샌드박스 QR 테스트 시 광고 로딩 필수 확인**

---

## ✅ 출시 전 필수 체크리스트 (v1.2 이후)

### 1. 기능 확인 (Feature Verification)
- [ ] 이전 버전 기능 목록과 비교 완료
- [ ] 신규 기능 목록 작성 완료
- [ ] 누락된 기능 없음 확인
- [ ] 모든 화면 스크린샷 저장 완료

### 2. 코드 검증 (Code Verification)
- [ ] `npm run qc` 통과
- [ ] `npm run build` 성공
- [ ] 토스 샌드박스 테스트 완료

### 3. 문서 업데이트 (Documentation)
- [ ] `07_RELEASE_HISTORY.md` 업데이트
- [ ] 버전별 스크린샷 폴더 생성
- [ ] 검증 보고서 작성

### 4. 승인 (Approval)
- [ ] 기능 목록 검토 완료 (담당자 사인)
- [ ] 스크린샷 검토 완료 (담당자 사인)
- [ ] **출시 승인** (담당자 사인)

---

## 📁 스크린샷 저장 규칙

### 폴더 구조
```
docs/assets/
├── v1.0.0/           # 버전별 폴더
│   ├── home.png
│   ├── profile.png
│   ├── today_fortune.png
│   └── premium_report.png
├── v1.0.1/
│   └── ...
└── v1.0.2/
    └── ...
```

### 파일 명명 규칙
- `home.png` - 홈 화면
- `profile.png` - 프로필 입력 화면
- `profile_[feature].png` - 프로필 특정 기능
- `today_fortune.png` - 오늘의 운세
- `premium_report.png` - 프리미엄 보고서
- `[screen]_[state].png` - 특정 상태 캡처

---

## 🔐 Git Stash 사용 주의사항

> ⚠️ **경고**: `git stash`는 임시 저장이며, 영구 보존이 아닙니다!

### Stash 사용 시 체크리스트
1. [ ] stash 전 변경 내용 메모 (어떤 기능인지)
2. [ ] stash 후 `git stash list`로 확인
3. [ ] 작업 완료 후 **반드시** `git stash pop` 또는 `git stash apply`
4. [ ] 복구 후 정상 동작 확인
5. [ ] 필요 없으면 `git stash drop`으로 명시적 삭제

### 위험한 작업 시
```bash
# stash 내용 확인
git stash show -p stash@{0}

# stash 복구 (삭제하지 않음)
git stash apply

# stash 복구 + 삭제
git stash pop
```

---

*이 문서는 모든 릴리스에서 업데이트되어야 합니다.*
